# Время выполнения поисковых запросов

![Дашборд "Время выполнения поисковых запросов"](img/timed-query/timed-query-main.png 'Дашборд "Время выполнения поисковых запросов"')

Данный дашборд визуализирует время (и успешных и пустых) выполнения поисковых запросов ТЕ. Это все установки с которых снимается sysinfo- 
развернуты на мощностях клиента и/или развернуты в сервисе "Техэксперт.Облако" 
и/или развернуты в ЦОДе дистрибьютора с доступом через Интернет, сервера в датацентре ДЦ (так называемые онлайны)

Этот дашборд следует рассматривать как  инструмент проактивного контроля за установками и работой на упреждение потенциальных проблем
а так же инструментом для глобального анализа и объективной оценки скорости работы ТЕ. Средство работы с возражениями пользователей.

## Причины выполнения запросов более 10 секунд

Особенностью работы поисковой машины ТЕ является сильная зависимость времени выполенения поиска
от того что было вставлено в поисковую строку.

Замеченные причины:
* длинная строка текста, много слов разделённых пробелами
* много точек\разделителей. Пример: ПНД Ф 14.1:2:3:4..112-2023
* тире в запросе длинное, тире в оригинальном номере искомого - короткое
* пустой поиск

И только в последнюю очередь недостаточность ресурсов на сервере с установкой.

Так же весь "пустой" поиск выполняется очень долго. Возможная причина - невозможность ТЕ использовать индексы или
другие механизмы эффективной работы с БД

Отдельно стоит отменить ситуацию с "устаревшим" клиентом ТЕ. Он не может быстро рендерить html страницы с высокой
скоростью и поэтому выдача формируется\отображается очень долго (должно быть устранено в новых версиях)

Дашборд своим функционалом закрывает сразу проблемы  менеджера по сопровождению:
- вопрос "здоровья" той или иной установки: при определенных нештатных состояниях поиск может идти дольше чем обычно;
- вопрос информационный: менеджер видит слишком длинные запросы пользователя и их длительную обработку и понимает, что, 
возможно, требуется дообучить пользователя и\или требуются ещё дополнтельные мероприятия технического или организационного типа.


## Способы интерпретации полученных результатов

Исследования психологов показывают, что если пользователь не получает ответной
реакции системы в течении 7-10 секунд, то это рассматривается им как "дикие тормоза". Все привыкли к скорости
работы google и\или автоподсказок на веб сайтах.

Дашборду доступны следующие фильтры:
- Клиент (возможность фильтровать по конкретному клиенту)
- Статус поиска (возможность отслеживать скорость выполнения поискового запроса при успешном поиске и пустом поиске)
- Время выполнения запроса более чем N секунд
- Каталог (возможность ограничивать по конкретному каталогу, в том случае когда на установке развернуто более чем один 
/docs каталог и есть разграничения по правам доступа пользователей к разным каталогам)

Комбинирование этих фильтров с функцией "View" для каждого графика/таблицы уберёт ненужную информацию по теме
скорости работы поисковой машины К/ТЭ у того или иного клиента.

При просмотре всего дашборда целиком, комбинирование времени отработки запроса из легенды справа от графика и в таблице
под графиком поможет найти ответ на вопрос "какой именно запрос пользователя выполнялся так долго/т

Как было написано выше "пустой" поиск ВСЕГДА выполняется дольше чем 10 секунд - и поэтому анализ времени выполнения
поисковых запросов закончившиеся ничем следует рассматривать только в плоскости ожидания клиентов ответа от ТЕ и
объёма его недовольства.

Анализ следует проводить для **успешного** поиска. Выставить ограничение времени в 10 секунд и оценить количетсво
количество этих запросов. Если количество достаточно большое - надо произвести анализ:\

* какие пользователи генерируют наибольшее количество длинных запросов
* что было в поисковых запросах. какой длинные. какие разделительные символы использовались. их количество.
* оценить пропорцию поисковых запросов короче 10 секунд к количеству запросов более 10 секунд

Из этого можно сформировать перечень мероприятий:

* с "необученностью" пользователя принципов работы с поисковой строкой
* купировать практику ctrl+c \ ctrl + V длинных текстов из браузеров
* помочь в обработке претензий типа "ТЕ тормозит"
* оценить скорость работы "банка документов"

Для понимания в вопросе качества и "правильности" эксплуатации пользователями установки (тот самый пустой поиск, занятые 
лицензии, статистика и аналитика и т.д.), менеджеру по сопровождению следует обратить своей внимание на иные дашборды:
- [Kodeks аналитика](062-kodeks-analytics.md)
- [Для менеджеров](066-for-managers.md)
- [Поисковые запросы](072-search-query.md)
- [kAsisst](078-kassist.md)
- и остальные

[Дальше](100-smart-real-cases-1.md)

[Назад](082-quarterly-analytics.md)

[Вернуться в Оглавление](Readme.md)
